// This is your Prisma schema file
// Learn more about it in the docs: https://pris.ly/d/prisma-schema 

generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Thing {
  id      Int     @id @default(autoincrement())
  label   String
  comment String?

  person       Person?
  organization Organization?
  intangible   Intangible?
}

model Intangible {
  id      Int     @id @default(autoincrement())
  label   String?
  comment String?

  thingId Int   @unique
  thing   Thing @relation(fields: [thingId], references: [id])

  service           Service?
  structuredValue   StructuredValue?
  statusEnumeration StatusEnumeration?
}

model StructuredValue {
  id           Int        @id @default(autoincrement())
  label        String?
  comment      String?
  intangibleId Int        @unique
  intangible   Intangible @relation(fields: [intangibleId], references: [id])

  monetaryAmount MonetaryAmount?
  contactPoint   ContactPoint?
}

model ContactPoint {
  id                Int             @id @default(autoincrement())
  label             String
  comment           String?
  email             String?
  telephone         String?
  structuredValueId Int             @unique
  structuredValue   StructuredValue @relation(fields: [structuredValueId], references: [id])
}

model Service {
  id           Int        @id @default(autoincrement())
  intangibleId Int        @unique
  intangible   Intangible @relation(fields: [intangibleId], references: [id])

  financialProduct FinancialProduct?
}

model FinancialProduct {
  id           Int     @id @default(autoincrement())
  serviceId    Int     @unique
  label        String  @unique
  interestRate Float
  service      Service @relation(fields: [serviceId], references: [id])
}

model Organization {
  id      Int     @id @default(autoincrement())
  label   String
  comment String?
  thingId Int     @unique
  thing   Thing   @relation(fields: [thingId], references: [id])

  governmentOrganization GovernmentOrganization?
}

model GovernmentOrganization {
  id             Int          @id @default(autoincrement())
  label          String
  comment        String?
  organizationId Int          @unique
  organization   Organization @relation(fields: [organizationId], references: [id])
}

model Person {
  id                 Int     @id @default(autoincrement())
  label              String
  comment            String?
  owlEquivalentClass String?
  thingId            Int     @unique
  thing              Thing   @relation(fields: [thingId], references: [id])
}

model MonetaryAmount {
  id                Int             @id @default(autoincrement())
  structuredValueId Int             @unique
  value             Float           @default(0.0)
  currency          String          @default("BRL") // ISO 4217 currency code
  structuredValue   StructuredValue @relation(fields: [structuredValueId], references: [id])
}

model StatusEnumeration {
  id           Int        @id @default(autoincrement())
  label        String
  comment      String?
  intangibleId Int        @unique
  intangible   Intangible @relation(fields: [intangibleId], references: [id])
}
